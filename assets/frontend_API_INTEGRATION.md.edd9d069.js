import{_ as e,c as t,o as d,a as o}from"./app.5dbd4e2d.js";const f=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Purpose","slug":"purpose","link":"#purpose","children":[]},{"level":2,"title":"Service Module Conventions","slug":"service-module-conventions","link":"#service-module-conventions","children":[]},{"level":2,"title":"Standard Request Lifecycle","slug":"standard-request-lifecycle","link":"#standard-request-lifecycle","children":[]},{"level":2,"title":"Service Catalogue","slug":"service-catalogue","link":"#service-catalogue","children":[]},{"level":2,"title":"Payload Guidelines","slug":"payload-guidelines","link":"#payload-guidelines","children":[]},{"level":2,"title":"Error Handling","slug":"error-handling","link":"#error-handling","children":[]},{"level":2,"title":"Adding a New Service","slug":"adding-a-new-service","link":"#adding-a-new-service","children":[]},{"level":2,"title":"Testing Integrations","slug":"testing-integrations","link":"#testing-integrations","children":[]},{"level":2,"title":"Collaboration Tips","slug":"collaboration-tips","link":"#collaboration-tips","children":[]}],"relativePath":"frontend/API_INTEGRATION.md"}'),i={name:"frontend/API_INTEGRATION.md"},r=o('<p>% API Integration Guide</p><p>Last updated: 2025-11-08</p><h2 id="purpose" tabindex="-1">Purpose <a class="header-anchor" href="#purpose" aria-hidden="true">#</a></h2><p>This guide documents how the frontend communicates with the Salesforce Middleware APIs. Use it when adding new endpoints, debugging requests, or aligning with backend teams.</p><h2 id="service-module-conventions" tabindex="-1">Service Module Conventions <a class="header-anchor" href="#service-module-conventions" aria-hidden="true">#</a></h2><ul><li>All API modules live in <code>src/services</code>.</li><li>Each module exports functions that return typed promises (TypeScript interfaces from <code>src/types</code>).</li><li>Requests are environment-aware, using the active environment from <code>dashboard-store</code>.</li><li>Authentication headers are injected by the shared request helper (Bearer JWT).</li><li>Errors are normalized to friendly messages before surfacing to the UI.</li></ul><h2 id="standard-request-lifecycle" tabindex="-1">Standard Request Lifecycle <a class="header-anchor" href="#standard-request-lifecycle" aria-hidden="true">#</a></h2><ol><li>Page or hook calls a service method.</li><li>Service composes the URL (<code>${baseUrl}/${resource}</code>) and attaches query/body data.</li><li><code>fetchWithAuth</code> (or equivalent helper) adds headers, handles timeouts, and refreshes tokens if required.</li><li>Response is parsed and validated against expected types.</li><li>Caller handles success (state updates) or failure (toasts, inline errors).</li></ol><h2 id="service-catalogue" tabindex="-1">Service Catalogue <a class="header-anchor" href="#service-catalogue" aria-hidden="true">#</a></h2><table><thead><tr><th>Module</th><th>Responsibility</th><th>Key Functions</th></tr></thead><tbody><tr><td><code>auth-api.ts</code></td><td>Login, logout, refresh, fetch profile</td><td><code>login</code>, <code>refreshToken</code>, <code>getProfile</code>, <code>logout</code></td></tr><tr><td><code>user-api.ts</code></td><td>User CRUD, role updates, API keys</td><td><code>listUsers</code>, <code>getUser</code>, <code>updateUser</code>, <code>listRoles</code>, <code>generateApiKey</code></td></tr><tr><td><code>api-key-api.ts</code></td><td>API key lifecycle management</td><td><code>listApiKeys</code>, <code>createApiKey</code>, <code>revokeApiKey</code></td></tr><tr><td><code>audit-api.ts</code></td><td>Audit log retrieval/export</td><td><code>getAuditLogs</code>, <code>exportAuditLogs</code></td></tr><tr><td><code>logs-api.ts</code></td><td>Live log stream retrieval</td><td><code>getLiveLogs</code>, <code>exportLogs</code></td></tr><tr><td><code>queue-api.ts</code></td><td>Queue metrics and actions</td><td><code>getQueues</code>, <code>retryJob</code>, <code>exportQueueData</code></td></tr><tr><td><code>cron-jobs-api.ts</code></td><td>Cron job status, exports</td><td><code>getCronJobs</code>, <code>exportCronJobs</code></td></tr><tr><td><code>reports-api.ts</code></td><td>Scheduled reports configuration</td><td><code>listReports</code>, <code>createReport</code>, <code>exportReport</code></td></tr><tr><td><code>monitoring-api.ts</code></td><td>System monitoring metrics</td><td><code>getMetrics</code>, <code>getHealthChecks</code></td></tr><tr><td><code>endpoints-api.ts</code></td><td>Endpoint catalog and status</td><td><code>listEndpoints</code>, <code>updateEndpoint</code></td></tr><tr><td><code>errors-api.ts</code></td><td>Error catalog, details</td><td><code>listErrors</code>, <code>getErrorDetails</code>, <code>exportErrors</code></td></tr><tr><td><code>analytics-api.ts</code></td><td>Usage analytics data</td><td><code>getUsageSummary</code>, <code>exportUsage</code></td></tr><tr><td><code>export-api.ts</code></td><td>Centralized export orchestration</td><td><code>exportAllData</code>, helpers for CSV/JSON/XLSX</td></tr><tr><td><code>settings-api.ts</code></td><td>Global app settings</td><td><code>getSettings</code>, <code>updateSetting</code></td></tr></tbody></table><blockquote><p>Note: Cross-check function availability with backend\u2014some stubs may still be under development.</p></blockquote><h2 id="payload-guidelines" tabindex="-1">Payload Guidelines <a class="header-anchor" href="#payload-guidelines" aria-hidden="true">#</a></h2><ul><li><strong>Dates</strong>: Send/receive ISO 8601 strings. Use utilities in <code>src/lib/utils.ts</code> for parsing/formatting.</li><li><strong>Pagination</strong>: Expect <code>{ page, pageSize, total }</code>. Service functions should expose pagination-friendly type definitions.</li><li><strong>Filtering</strong>: Service methods accept filter objects matching backend query params. Keep filter typings in <code>src/types</code>.</li><li><strong>Exports</strong>: Accept <code>format</code>, <code>filters</code>, <code>fields</code>, <code>includeMetadata</code>. Responses return a Blob; use helpers to trigger downloads.</li></ul><h2 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-hidden="true">#</a></h2><ul><li>Translate backend error codes to friendly messages using the mapping in <code>src/utils/security.ts</code> (and related helper utilities).</li><li>Authentication failures (401) should trigger <code>auth-store.logout()</code> and redirect to <code>/login</code>.</li><li>Rate limit responses (429) should surface guidance and optionally backoff retries.</li></ul><h2 id="adding-a-new-service" tabindex="-1">Adding a New Service <a class="header-anchor" href="#adding-a-new-service" aria-hidden="true">#</a></h2><ol><li>Create <code>src/services/&lt;feature&gt;-api.ts</code>.</li><li>Implement helper functions using the shared request wrapper.</li><li>Add corresponding TypeScript interfaces/types.</li><li>(Optional) Add React Query hooks in <code>src/hooks</code> or feature-specific directories.</li><li>Document the module and key functions in the table above.</li></ol><h2 id="testing-integrations" tabindex="-1">Testing Integrations <a class="header-anchor" href="#testing-integrations" aria-hidden="true">#</a></h2><ul><li>Mock service responses in Storybook (if used) or add MSW handlers for unit tests.</li><li>Use the testing strategy guide (<code>docs/TESTING_STRATEGY.md</code>) for end-to-end validation steps.</li></ul><h2 id="collaboration-tips" tabindex="-1">Collaboration Tips <a class="header-anchor" href="#collaboration-tips" aria-hidden="true">#</a></h2><ul><li>Keep the function signatures aligned with backend OpenAPI specs.</li><li>Update this guide whenever an endpoint is added, renamed, or deprecated.</li><li>Include request/response samples in feature-specific docs for deeper context.</li></ul>',21),s=[r];function a(c,n,l,u,p,h){return d(),t("div",null,s)}const v=e(i,[["render",a]]);export{f as __pageData,v as default};
