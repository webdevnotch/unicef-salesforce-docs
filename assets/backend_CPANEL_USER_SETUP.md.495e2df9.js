import{_ as s,c as a,o as n,a as e}from"./app.980fc3ea.js";const D=JSON.parse('{"title":"cPanel Setup Guide (Without Root Access)","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u2705 Prerequisites","slug":"\u2705-prerequisites","link":"#\u2705-prerequisites","children":[{"level":3,"title":"Required Software","slug":"required-software","link":"#required-software","children":[]},{"level":3,"title":"System Requirements","slug":"system-requirements","link":"#system-requirements","children":[]},{"level":3,"title":"Access Requirements","slug":"access-requirements","link":"#access-requirements","children":[]}]},{"level":2,"title":"\u{1F4C2} Recommended Directory Structure","slug":"\u{1F4C2}-recommended-directory-structure","link":"#\u{1F4C2}-recommended-directory-structure","children":[]},{"level":2,"title":"\u{1F680} Step-by-Step Setup","slug":"\u{1F680}-step-by-step-setup","link":"#\u{1F680}-step-by-step-setup","children":[{"level":3,"title":"Step 1: Access Your Home Directory","slug":"step-1-access-your-home-directory","link":"#step-1-access-your-home-directory","children":[]},{"level":3,"title":"Step 2: Create Application Directory","slug":"step-2-create-application-directory","link":"#step-2-create-application-directory","children":[]},{"level":3,"title":"Step 3: Upload/Clone Your Code","slug":"step-3-upload-clone-your-code","link":"#step-3-upload-clone-your-code","children":[]},{"level":3,"title":"Step 4: Install Dependencies","slug":"step-4-install-dependencies","link":"#step-4-install-dependencies","children":[]},{"level":3,"title":"Step 5: Setup Database","slug":"step-5-setup-database","link":"#step-5-setup-database","children":[]},{"level":3,"title":"Step 6: Create Environment File","slug":"step-6-create-environment-file","link":"#step-6-create-environment-file","children":[]},{"level":3,"title":"Step 7: Create PM2 Configuration","slug":"step-7-create-pm2-configuration","link":"#step-7-create-pm2-configuration","children":[]},{"level":3,"title":"Step 8: Start Application with PM2","slug":"step-8-start-application-with-pm2","link":"#step-8-start-application-with-pm2","children":[]},{"level":3,"title":"Step 9: Setup Dashboard","slug":"step-9-setup-dashboard","link":"#step-9-setup-dashboard","children":[]},{"level":3,"title":"Step 10: Configure Subdomain (Optional)","slug":"step-10-configure-subdomain-optional","link":"#step-10-configure-subdomain-optional","children":[]}]},{"level":2,"title":"\u{1F527} Alternative: Using cPanel Application Manager","slug":"\u{1F527}-alternative-using-cpanel-application-manager","link":"#\u{1F527}-alternative-using-cpanel-application-manager","children":[]},{"level":2,"title":"\u{1F4DD} Important Notes","slug":"\u{1F4DD}-important-notes","link":"#\u{1F4DD}-important-notes","children":[{"level":3,"title":"Directory Paths","slug":"directory-paths","link":"#directory-paths","children":[]},{"level":3,"title":"Permissions","slug":"permissions","link":"#permissions","children":[]},{"level":3,"title":"Logs Location","slug":"logs-location","link":"#logs-location","children":[]},{"level":3,"title":"Redis","slug":"redis","link":"#redis","children":[]},{"level":3,"title":"PostgreSQL vs MySQL","slug":"postgresql-vs-mysql","link":"#postgresql-vs-mysql","children":[]}]},{"level":2,"title":"\u{1F6E0}\uFE0F Troubleshooting","slug":"\u{1F6E0}\uFE0F-troubleshooting","link":"#\u{1F6E0}\uFE0F-troubleshooting","children":[{"level":3,"title":"\\"Permission Denied\\" Errors","slug":"permission-denied-errors","link":"#permission-denied-errors","children":[]},{"level":3,"title":"PM2 Not Available","slug":"pm2-not-available","link":"#pm2-not-available","children":[]},{"level":3,"title":"Port Already in Use","slug":"port-already-in-use","link":"#port-already-in-use","children":[]},{"level":3,"title":"Database Connection Issues","slug":"database-connection-issues","link":"#database-connection-issues","children":[]}]},{"level":2,"title":"\u{1F504} Deployment Script (Using npm ci)","slug":"\u{1F504}-deployment-script-using-npm-ci","link":"#\u{1F504}-deployment-script-using-npm-ci","children":[]},{"level":2,"title":"\u{1F4DE} Support","slug":"\u{1F4DE}-support","link":"#\u{1F4DE}-support","children":[]},{"level":2,"title":"\u{1F389} Summary","slug":"\u{1F389}-summary","link":"#\u{1F389}-summary","children":[]}],"relativePath":"backend/CPANEL_USER_SETUP.md"}'),l={name:"backend/CPANEL_USER_SETUP.md"},o=e(`<h1 id="cpanel-setup-guide-without-root-access" tabindex="-1">cPanel Setup Guide (Without Root Access) <a class="header-anchor" href="#cpanel-setup-guide-without-root-access" aria-hidden="true">#</a></h1><p>This guide is for cPanel users who <strong>don&#39;t have root access</strong> and cannot use <code>/opt/</code> directory.</p><h2 id="\u2705-prerequisites" tabindex="-1">\u2705 Prerequisites <a class="header-anchor" href="#\u2705-prerequisites" aria-hidden="true">#</a></h2><h3 id="required-software" tabindex="-1">Required Software <a class="header-anchor" href="#required-software" aria-hidden="true">#</a></h3><table><thead><tr><th>Software</th><th>Minimum Version</th><th>Installation Status</th></tr></thead><tbody><tr><td><strong>Node.js</strong></td><td>18+</td><td>We&#39;ll install (via cPanel Node.js Selector or request from host)</td></tr><tr><td><strong>PostgreSQL</strong></td><td>15+</td><td>We&#39;ll install (may need to request from hosting provider)</td></tr><tr><td><strong>Redis</strong></td><td>7+</td><td>We&#39;ll install (may need to request from hosting provider)</td></tr><tr><td><strong>PM2</strong></td><td>Latest</td><td>We&#39;ll install (via npm or request from hosting provider)</td></tr><tr><td><strong>Nginx</strong></td><td>Latest</td><td>Typically pre-installed (but may not have direct access)</td></tr></tbody></table><h3 id="system-requirements" tabindex="-1">System Requirements <a class="header-anchor" href="#system-requirements" aria-hidden="true">#</a></h3><ul><li><strong>RAM</strong>: 16GB (8GB minimum)</li><li><strong>CPU</strong>: 8 cores (4 minimum)</li><li><strong>Storage</strong>: 100GB+ SSD</li><li><strong>OS</strong>: CentOS/CloudLinux with cPanel</li></ul><h3 id="access-requirements" tabindex="-1">Access Requirements <a class="header-anchor" href="#access-requirements" aria-hidden="true">#</a></h3><ul><li><strong>SSH Access</strong>: Required (usually available in cPanel)</li><li><strong>cPanel Account</strong>: With application deployment permissions</li><li><strong>Node.js Support</strong>: Via cPanel Node.js Selector or hosting provider setup</li></ul><p><strong>Important:</strong> Some hosting providers may not offer PostgreSQL or Redis. In such cases, you may need to:</p><ul><li>Request these services from your hosting provider</li><li>Use external managed services (e.g., managed PostgreSQL/Redis from cloud providers)</li><li>Consider upgrading to a VPS/dedicated server for full control</li></ul><h2 id="\u{1F4C2}-recommended-directory-structure" tabindex="-1">\u{1F4C2} Recommended Directory Structure <a class="header-anchor" href="#\u{1F4C2}-recommended-directory-structure" aria-hidden="true">#</a></h2><p>For cPanel accounts, use your home directory (<code>~/</code>) instead of <code>/opt/</code>:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">/home/your-cpanel-username/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 sf-middleware/              # API Backend</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 dist/                   # Built application</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 logs/                   # Application logs</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 .env                    # Environment variables</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 ecosystem.config.js     # PM2 configuration</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 ...                     # Source code</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 sf-dashboard/               # Dashboard build directory</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 dist/                   # Built dashboard files</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 ...</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 public_html/               # Web-accessible files</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 yourdomain.com/        # Dashboard files go here</span></span>
<span class="line"><span style="color:#A6ACCD;">        \u2514\u2500\u2500 index.html</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="\u{1F680}-step-by-step-setup" tabindex="-1">\u{1F680} Step-by-Step Setup <a class="header-anchor" href="#\u{1F680}-step-by-step-setup" aria-hidden="true">#</a></h2><h3 id="step-1-access-your-home-directory" tabindex="-1">Step 1: Access Your Home Directory <a class="header-anchor" href="#step-1-access-your-home-directory" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Connect via SSH (cPanel usually provides SSH access)</span></span>
<span class="line"><span style="color:#676E95;"># Your home directory is typically: /home/your-username</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span></span>
<span class="line"><span style="color:#82AAFF;">pwd</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># Should show /home/your-username</span></span>
<span class="line"></span></code></pre></div><h3 id="step-2-create-application-directory" tabindex="-1">Step 2: Create Application Directory <a class="header-anchor" href="#step-2-create-application-directory" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Create directories in your home directory</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-dashboard</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/logs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span></code></pre></div><h3 id="step-3-upload-clone-your-code" tabindex="-1">Step 3: Upload/Clone Your Code <a class="header-anchor" href="#step-3-upload-clone-your-code" aria-hidden="true">#</a></h3><p>You have several options:</p><p><strong>Option A: Via Git (if available)</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">git clone https://your-repo/sf-project.git temp</span></span>
<span class="line"><span style="color:#A6ACCD;">mv temp/sf-middleware/</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">rm -rf temp</span></span>
<span class="line"></span></code></pre></div><p><strong>Option B: Via cPanel File Manager</strong></p><ol><li>Open cPanel File Manager</li><li>Navigate to your home directory</li><li>Upload and extract your <code>sf-middleware</code> files to <code>~/sf-middleware/</code></li></ol><p><strong>Option C: Via SFTP/SCP</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># From your local machine</span></span>
<span class="line"><span style="color:#A6ACCD;">scp -r sf-middleware/</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> your-username@your-server.com:</span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/</span></span>
<span class="line"></span></code></pre></div><h3 id="step-4-install-dependencies" tabindex="-1">Step 4: Install Dependencies <a class="header-anchor" href="#step-4-install-dependencies" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Check Node.js version (should be 18+)</span></span>
<span class="line"><span style="color:#A6ACCD;">node --version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># If Node.js is not available, install via cPanel:</span></span>
<span class="line"><span style="color:#676E95;"># 1. Go to cPanel \u2192 Software \u2192 Node.js Selector</span></span>
<span class="line"><span style="color:#676E95;"># 2. Install Node.js 18 or higher</span></span>
<span class="line"><span style="color:#676E95;"># 3. Create application and set Node.js version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Use npm ci for production deployments (faster and more reliable)</span></span>
<span class="line"><span style="color:#676E95;"># This requires package-lock.json to exist</span></span>
<span class="line"><span style="color:#A6ACCD;">npm ci</span></span>
<span class="line"><span style="color:#A6ACCD;">npm run build</span></span>
<span class="line"><span style="color:#A6ACCD;">npx prisma generate</span></span>
<span class="line"></span></code></pre></div><p><strong>Note:</strong> <code>npm ci</code> is preferred over <code>npm install</code> because:</p><ul><li>\u2705 Faster installation (uses exact versions from package-lock.json)</li><li>\u2705 More reliable (removes node_modules and does a clean install)</li><li>\u2705 Deterministic (ensures exact dependency versions)</li><li>\u2705 Fails if package-lock.json is out of sync (prevents inconsistencies)</li></ul><p>If <code>package-lock.json</code> doesn&#39;t exist, you can generate it first:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">npm install  </span><span style="color:#676E95;"># Creates package-lock.json</span></span>
<span class="line"><span style="color:#676E95;"># Then use npm ci for future deployments</span></span>
<span class="line"></span></code></pre></div><h3 id="step-5-setup-database" tabindex="-1">Step 5: Setup Database <a class="header-anchor" href="#step-5-setup-database" aria-hidden="true">#</a></h3><p>In cPanel, databases are typically managed via the UI:</p><ol><li><p><strong>Create Database via cPanel:</strong></p><ul><li>Go to cPanel \u2192 MySQL Databases</li><li>Create a new database (e.g., <code>username_sfapi</code>)</li><li>Create a database user</li><li>Grant all privileges to the user on the database</li><li>Note the database connection details</li></ul></li><li><p><strong>Get Database Connection Info:</strong></p><ul><li>Database host: Usually <code>localhost</code> or <code>127.0.0.1</code></li><li>Database name: <code>username_sfapi</code></li><li>Username: <code>username_dbuser</code></li><li>Password: (the one you set)</li></ul></li><li><p><strong>Run Migrations:</strong></p></li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Update .env with your database connection</span></span>
<span class="line"><span style="color:#676E95;"># DATABASE_URL=postgresql://username:password@localhost:5432/username_sfapi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">npx prisma migrate deploy</span></span>
<span class="line"></span></code></pre></div><h3 id="step-6-create-environment-file" tabindex="-1">Step 6: Create Environment File <a class="header-anchor" href="#step-6-create-environment-file" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">nano .env</span></span>
<span class="line"></span></code></pre></div><p><strong>Environment Variables:</strong></p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"># Application</span></span>
<span class="line"><span style="color:#A6ACCD;">NODE_ENV=production</span></span>
<span class="line"><span style="color:#A6ACCD;">PORT=3000</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Database (from cPanel MySQL Databases)</span></span>
<span class="line"><span style="color:#A6ACCD;">DATABASE_URL=postgresql://username:password@localhost:5432/username_sfapi</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Redis (if available - check with your hosting provider)</span></span>
<span class="line"><span style="color:#A6ACCD;">REDIS_URL=redis://localhost:6379</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># JWT</span></span>
<span class="line"><span style="color:#A6ACCD;">JWT_SECRET=your-super-secret-jwt-key-change-this</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Salesforce API</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_BASE_ENDPOINT=https://your-salesforce-endpoint.com</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_CLIENT_ID=your-client-id</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_CLIENT_SECRET=your-client-secret</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_RESOURCE_API=your-resource-api-endpoint</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_TOKEN_URL=https://your-token-endpoint.com</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_SUBSCRIPTION_KEY=your-subscription-key</span></span>
<span class="line"><span style="color:#A6ACCD;">SF_SUBSCRIPTION_PAYMENT_KEY=your-payment-key</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Queue Configuration</span></span>
<span class="line"><span style="color:#A6ACCD;">QUEUE_NAME=sf-queue</span></span>
<span class="line"><span style="color:#A6ACCD;">SALESFORCE_CONCURRENCY=20</span></span>
<span class="line"><span style="color:#A6ACCD;">EMAIL_CONCURRENCY=20</span></span>
<span class="line"><span style="color:#A6ACCD;">NOTIFICATION_CONCURRENCY=20</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># CORS</span></span>
<span class="line"><span style="color:#A6ACCD;">CORS_ORIGIN=https://yourdomain.com</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Rate Limiting</span></span>
<span class="line"><span style="color:#A6ACCD;">HIGH_VOLUME_RATE_LIMIT=1000</span></span>
<span class="line"><span style="color:#A6ACCD;">RATE_LIMIT_MAX=500</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="step-7-create-pm2-configuration" tabindex="-1">Step 7: Create PM2 Configuration <a class="header-anchor" href="#step-7-create-pm2-configuration" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">nano ecosystem.config.js</span></span>
<span class="line"></span></code></pre></div><p><strong>Content:</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">apps</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sf-middleware</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dist/main.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">instances</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Adjust based on your hosting limits</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">exec_mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fork</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Use &#39;fork&#39; if cluster mode not supported</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">env</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">NODE_ENV</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">production</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">PORT</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">env_file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">error_file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./logs/error.log</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">out_file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./logs/out.log</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">log_date_format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">YYYY-MM-DD HH:mm:ss Z</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">merge_logs</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">autorestart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">max_memory_restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1G</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">watch</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">ignore_watch</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">logs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h3 id="step-8-start-application-with-pm2" tabindex="-1">Step 8: Start Application with PM2 <a class="header-anchor" href="#step-8-start-application-with-pm2" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Install PM2 globally (if not already installed)</span></span>
<span class="line"><span style="color:#A6ACCD;">npm install -g pm2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Start the application</span></span>
<span class="line"><span style="color:#A6ACCD;">pm2 start ecosystem.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Save PM2 process list</span></span>
<span class="line"><span style="color:#A6ACCD;">pm2 save</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Check status</span></span>
<span class="line"><span style="color:#A6ACCD;">pm2 status</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># View logs</span></span>
<span class="line"><span style="color:#A6ACCD;">pm2 logs sf-middleware</span></span>
<span class="line"></span></code></pre></div><p><strong>Note:</strong> Some cPanel hosts may restrict PM2. If PM2 is not available:</p><ul><li>Use cPanel&#39;s Application Manager</li><li>Or contact your hosting provider to enable PM2/Node.js apps</li><li>Or use <code>nohup</code> as a fallback (not recommended for production)</li></ul><h3 id="step-9-setup-dashboard" tabindex="-1">Step 9: Setup Dashboard <a class="header-anchor" href="#step-9-setup-dashboard" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Navigate to dashboard directory</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-dashboard</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Upload/clone dashboard files here</span></span>
<span class="line"><span style="color:#676E95;"># (similar to step 3)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Install dependencies using npm ci (recommended for production)</span></span>
<span class="line"><span style="color:#A6ACCD;">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Create production environment file</span></span>
<span class="line"><span style="color:#A6ACCD;">nano .env.production</span></span>
<span class="line"></span></code></pre></div><p><strong>.env.production:</strong></p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">VITE_API_URL=https://api.yourdomain.com</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_WS_URL=wss://api.yourdomain.com</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_APP_TITLE=SF Middleware Dashboard</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Build dashboard (with memory flags already in package.json)</span></span>
<span class="line"><span style="color:#A6ACCD;">npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Copy to public_html</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/public_html/yourdomain.com</span></span>
<span class="line"><span style="color:#A6ACCD;">cp -r </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-dashboard/dist/</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/public_html/yourdomain.com/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Set permissions (if needed)</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod -R 755 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/public_html/yourdomain.com</span></span>
<span class="line"></span></code></pre></div><h3 id="step-10-configure-subdomain-optional" tabindex="-1">Step 10: Configure Subdomain (Optional) <a class="header-anchor" href="#step-10-configure-subdomain-optional" aria-hidden="true">#</a></h3><p>If you want a separate subdomain for the API:</p><ol><li><p><strong>In cPanel:</strong></p><ul><li>Go to Subdomains</li><li>Create subdomain: <code>api.yourdomain.com</code></li><li>Document root: <code>~/public_html/api.yourdomain.com</code> (or similar)</li></ul></li><li><p><strong>Create Reverse Proxy:</strong></p><ul><li>You may need to use <code>.htaccess</code> for Apache reverse proxy</li><li>Or contact your hosting provider for Nginx reverse proxy setup</li><li>Or use cPanel&#39;s Application Manager if it supports Node.js apps</li></ul></li></ol><h2 id="\u{1F527}-alternative-using-cpanel-application-manager" tabindex="-1">\u{1F527} Alternative: Using cPanel Application Manager <a class="header-anchor" href="#\u{1F527}-alternative-using-cpanel-application-manager" aria-hidden="true">#</a></h2><p>Many cPanel hosts provide an &quot;Application Manager&quot; that simplifies Node.js deployments:</p><ol><li><p><strong>In cPanel:</strong></p><ul><li>Go to Software \u2192 Node.js Selector</li><li>Click &quot;Create Application&quot;</li><li>Set: <ul><li>Node.js version: 18+</li><li>Application root: <code>~/sf-middleware</code></li><li>Application URL: Choose subdomain or subdirectory</li><li>Application startup file: <code>dist/main.js</code></li><li>Application mode: Production</li></ul></li><li>Add environment variables (from your <code>.env</code> file)</li></ul></li><li><p><strong>The Application Manager will:</strong></p><ul><li>Automatically start your app</li><li>Handle restarts</li><li>Provide a URL to access your API</li></ul></li></ol><h2 id="\u{1F4DD}-important-notes" tabindex="-1">\u{1F4DD} Important Notes <a class="header-anchor" href="#\u{1F4DD}-important-notes" aria-hidden="true">#</a></h2><h3 id="directory-paths" tabindex="-1">Directory Paths <a class="header-anchor" href="#directory-paths" aria-hidden="true">#</a></h3><p><strong>Replace in all commands:</strong></p><ul><li><code>/opt/sf-middleware</code> \u2192 <code>~/sf-middleware</code> or <code>/home/your-username/sf-middleware</code></li><li><code>/opt/sf-dashboard</code> \u2192 <code>~/sf-dashboard</code> or <code>/home/your-username/sf-dashboard</code></li></ul><h3 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Make sure you own the directories</span></span>
<span class="line"><span style="color:#A6ACCD;">chown -R </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">USER:</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">USER </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">chown -R </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">USER:</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">USER </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-dashboard</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Set proper permissions</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod -R 755 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod 600 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/.env  </span><span style="color:#676E95;"># Protect environment file</span></span>
<span class="line"></span></code></pre></div><h3 id="logs-location" tabindex="-1">Logs Location <a class="header-anchor" href="#logs-location" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Logs will be in:</span></span>
<span class="line"><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/logs/error.log</span></span>
<span class="line"><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/logs/out.log</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Or check PM2 logs:</span></span>
<span class="line"><span style="color:#A6ACCD;">pm2 logs sf-middleware</span></span>
<span class="line"></span></code></pre></div><h3 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-hidden="true">#</a></h3><p>If Redis is not available:</p><ul><li>Contact your hosting provider</li><li>Some hosts provide Redis through cPanel</li><li>Or use an external Redis service (Redis Cloud, etc.)</li></ul><h3 id="postgresql-vs-mysql" tabindex="-1">PostgreSQL vs MySQL <a class="header-anchor" href="#postgresql-vs-mysql" aria-hidden="true">#</a></h3><p><strong>Note:</strong> The application uses PostgreSQL. If your cPanel only provides MySQL:</p><ul><li>Contact your hosting provider about PostgreSQL</li><li>Or consider using a managed PostgreSQL service</li><li>Or modify the application to use MySQL (requires code changes)</li></ul><h2 id="\u{1F6E0}\uFE0F-troubleshooting" tabindex="-1">\u{1F6E0}\uFE0F Troubleshooting <a class="header-anchor" href="#\u{1F6E0}\uFE0F-troubleshooting" aria-hidden="true">#</a></h2><h3 id="permission-denied-errors" tabindex="-1">&quot;Permission Denied&quot; Errors <a class="header-anchor" href="#permission-denied-errors" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Check ownership</span></span>
<span class="line"><span style="color:#A6ACCD;">ls -la </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Fix ownership</span></span>
<span class="line"><span style="color:#A6ACCD;">chown -R </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">USER:</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">USER </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Check file permissions</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod +x </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/dist/main.js</span></span>
<span class="line"></span></code></pre></div><h3 id="pm2-not-available" tabindex="-1">PM2 Not Available <a class="header-anchor" href="#pm2-not-available" aria-hidden="true">#</a></h3><p><strong>Option 1: Use cPanel Application Manager</strong> (recommended)</p><ul><li>Set up through cPanel UI as described above</li></ul><p><strong>Option 2: Request PM2 from Host</strong></p><ul><li>Contact hosting provider to enable PM2</li></ul><p><strong>Option 3: Use nohup (not recommended)</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"><span style="color:#A6ACCD;">nohup node dist/main.js </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> logs/out.log </span><span style="color:#89DDFF;">2&gt;</span><span style="color:#A6ACCD;"> logs/error.log </span><span style="color:#89DDFF;">&amp;</span></span>
<span class="line"></span></code></pre></div><h3 id="port-already-in-use" tabindex="-1">Port Already in Use <a class="header-anchor" href="#port-already-in-use" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Check what&#39;s using port 3000</span></span>
<span class="line"><span style="color:#A6ACCD;">lsof -i :3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Change PORT in .env to an available port</span></span>
<span class="line"><span style="color:#676E95;"># Then update your reverse proxy configuration</span></span>
<span class="line"></span></code></pre></div><h3 id="database-connection-issues" tabindex="-1">Database Connection Issues <a class="header-anchor" href="#database-connection-issues" aria-hidden="true">#</a></h3><ul><li>Verify database credentials in cPanel</li><li>Check if database host is <code>localhost</code> or <code>127.0.0.1</code></li><li>Some hosts use socket connections - check cPanel MySQL settings</li><li>Verify database user has all privileges</li></ul><h2 id="\u{1F504}-deployment-script-using-npm-ci" tabindex="-1">\u{1F504} Deployment Script (Using npm ci) <a class="header-anchor" href="#\u{1F504}-deployment-script-using-npm-ci" aria-hidden="true">#</a></h2><p>For regular updates, create a deployment script that uses <code>npm ci</code>:</p><p><strong>Create <code>~/sf-middleware/deploy.sh</code>:</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Set Node.js memory limit (handled by package.json, but can override)</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> NODE_OPTIONS=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--max-old-space-size=4096</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F504} Pulling latest changes from GitHub...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">git pull origin main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F4E6} Installing dependencies with npm ci...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F528} Building application...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F5C4}\uFE0F Running database migrations...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">npx prisma migrate deploy</span></span>
<span class="line"><span style="color:#A6ACCD;">npx prisma generate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F504} Restarting application...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">pm2 restart sf-middleware </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> pm2 start ecosystem.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u2705 Deployment complete!</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p><strong>Make it executable:</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">chmod +x </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/deploy.sh</span></span>
<span class="line"></span></code></pre></div><p><strong>Then deploy with:</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-middleware/deploy.sh</span></span>
<span class="line"></span></code></pre></div><p><strong>For dashboard deployment, create <code>~/sf-dashboard/deploy.sh</code>:</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/sf-dashboard</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F504} Pulling latest changes from GitHub...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">git pull origin main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F4E6} Installing dependencies with npm ci...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F528} Building dashboard...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u{1F4C1} Copying to public_html...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">cp -r dist/</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/public_html/yourdomain.com/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u2705 Dashboard deployment complete!</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p><strong>Why <code>npm ci</code> over <code>npm install</code>?</strong></p><ul><li>\u2705 <strong>Faster</strong>: Uses exact versions from <code>package-lock.json</code> (no resolution needed)</li><li>\u2705 <strong>More reliable</strong>: Removes <code>node_modules</code> and does a clean install</li><li>\u2705 <strong>Deterministic</strong>: Ensures exact dependency versions match your lock file</li><li>\u2705 <strong>Fails fast</strong>: Errors if <code>package-lock.json</code> is out of sync (prevents bugs)</li><li>\u2705 <strong>Production-ready</strong>: Same approach used in Docker builds</li></ul><p><strong>Note:</strong> Always commit <code>package-lock.json</code> to your repository for <code>npm ci</code> to work.</p><h2 id="\u{1F4DE}-support" tabindex="-1">\u{1F4DE} Support <a class="header-anchor" href="#\u{1F4DE}-support" aria-hidden="true">#</a></h2><p>If you encounter issues:</p><ol><li>Check application logs: <code>~/sf-middleware/logs/</code></li><li>Check cPanel error logs</li><li>Verify all environment variables are set correctly</li><li>Contact your hosting provider for Node.js/PM2 support</li></ol><h2 id="\u{1F389}-summary" tabindex="-1">\u{1F389} Summary <a class="header-anchor" href="#\u{1F389}-summary" aria-hidden="true">#</a></h2><p><strong>Key Differences from Root Setup:</strong></p><ul><li>\u2705 Use <code>~/</code> (home directory) instead of <code>/opt/</code></li><li>\u2705 Use cPanel MySQL instead of standalone PostgreSQL (may need adjustment)</li><li>\u2705 Use cPanel Application Manager if available</li><li>\u2705 Contact hosting provider for Redis/PM2 if not available</li><li>\u2705 Set proper file permissions in home directory</li></ul><p><strong>Directory Structure:</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">~/sf-middleware/          \u2190 Application code</span></span>
<span class="line"><span style="color:#A6ACCD;">~/sf-dashboard/           \u2190 Dashboard build</span></span>
<span class="line"><span style="color:#A6ACCD;">~/public_html/domain.com/ \u2190 Dashboard files for web</span></span>
<span class="line"><span style="color:#A6ACCD;">~/sf-middleware/logs/     \u2190 Application logs</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,109),p=[o];function t(r,c,i,d,y,C){return n(),a("div",null,p)}const A=s(l,[["render",t]]);export{D as __pageData,A as default};
