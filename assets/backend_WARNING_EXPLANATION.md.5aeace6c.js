import{_ as e,c as a,o as s,a as n}from"./app.980fc3ea.js";const b=JSON.parse('{"title":"Warning Explanation: \\"Could not find cron job in registry\\"","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u26A0\uFE0F What the Warning Meant","slug":"\u26A0\uFE0F-what-the-warning-meant","link":"#\u26A0\uFE0F-what-the-warning-meant","children":[]},{"level":2,"title":"\u2705 Why It Was Safe to Ignore","slug":"\u2705-why-it-was-safe-to-ignore","link":"#\u2705-why-it-was-safe-to-ignore","children":[]},{"level":2,"title":"\u{1F527} What Was Changed","slug":"\u{1F527}-what-was-changed","link":"#\u{1F527}-what-was-changed","children":[{"level":3,"title":"Before (With Warning)","slug":"before-with-warning","link":"#before-with-warning","children":[]},{"level":3,"title":"After (Clean)","slug":"after-clean","link":"#after-clean","children":[]}]},{"level":2,"title":"\u{1F3AF} How It Works Now","slug":"\u{1F3AF}-how-it-works-now","link":"#\u{1F3AF}-how-it-works-now","children":[{"level":3,"title":"Disable Flow","slug":"disable-flow","link":"#disable-flow","children":[]},{"level":3,"title":"Enable Flow","slug":"enable-flow","link":"#enable-flow","children":[]}]},{"level":2,"title":"\u{1F4CA} Comparison","slug":"\u{1F4CA}-comparison","link":"#\u{1F4CA}-comparison","children":[]},{"level":2,"title":"\u2705 Current Status","slug":"\u2705-current-status","link":"#\u2705-current-status","children":[]},{"level":2,"title":"\u{1F389} Summary","slug":"\u{1F389}-summary","link":"#\u{1F389}-summary","children":[]}],"relativePath":"backend/WARNING_EXPLANATION.md"}'),t={name:"backend/WARNING_EXPLANATION.md"},r=n(`<h1 id="warning-explanation-could-not-find-cron-job-in-registry" tabindex="-1">Warning Explanation: &quot;Could not find cron job in registry&quot; <a class="header-anchor" href="#warning-explanation-could-not-find-cron-job-in-registry" aria-hidden="true">#</a></h1><h2 id="\u26A0\uFE0F-what-the-warning-meant" tabindex="-1">\u26A0\uFE0F What the Warning Meant <a class="header-anchor" href="#\u26A0\uFE0F-what-the-warning-meant" aria-hidden="true">#</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">&quot;Could not find cron job scheduleOneOffJobsJob in registry, but state updated to disabled&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>This warning appeared because the code tried to manually stop cron jobs in the SchedulerRegistry, but NestJS&#39;s <code>@Cron()</code> decorator doesn&#39;t register jobs with the names we expected.</p><hr><h2 id="\u2705-why-it-was-safe-to-ignore" tabindex="-1">\u2705 Why It Was Safe to Ignore <a class="header-anchor" href="#\u2705-why-it-was-safe-to-ignore" aria-hidden="true">#</a></h2><p>The warning was <strong>harmless</strong> because:</p><ol><li><strong>State-based control is already working</strong>: Jobs check <code>CronJobStateService</code> before executing</li><li><strong>The state was updated</strong>: Even though the registry lookup failed, the state change succeeded</li><li><strong>Jobs will skip</strong>: Disabled jobs will skip on their next scheduled run</li></ol><hr><h2 id="\u{1F527}-what-was-changed" tabindex="-1">\u{1F527} What Was Changed <a class="header-anchor" href="#\u{1F527}-what-was-changed" aria-hidden="true">#</a></h2><h3 id="before-with-warning" tabindex="-1">Before (With Warning) <a class="header-anchor" href="#before-with-warning" aria-hidden="true">#</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// Tried to manually stop the job via SchedulerRegistry</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">schedulerRegistry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCronJob</span><span style="color:#A6ACCD;">(jobName)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">job</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stop</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// Warning if not found</span></span>
<span class="line"></span></code></pre></div><h3 id="after-clean" tabindex="-1">After (Clean) <a class="header-anchor" href="#after-clean" aria-hidden="true">#</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// Just update the state - simpler and works perfectly</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">cronJobStateService</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setJobEnabled</span><span style="color:#A6ACCD;">(jobType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> enabled)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// JobSchedulerService checks this state before running</span></span>
<span class="line"></span></code></pre></div><hr><h2 id="\u{1F3AF}-how-it-works-now" tabindex="-1">\u{1F3AF} How It Works Now <a class="header-anchor" href="#\u{1F3AF}-how-it-works-now" aria-hidden="true">#</a></h2><h3 id="disable-flow" tabindex="-1">Disable Flow <a class="header-anchor" href="#disable-flow" aria-hidden="true">#</a></h3><ol><li>User clicks toggle \u2192 <code>enabled = false</code></li><li>Update <code>CronJobStateService</code> state</li><li>Next scheduled run \u2192 JobSchedulerService checks state</li><li>State is disabled \u2192 Job returns early, skips execution</li><li>\u2705 <strong>Works perfectly!</strong></li></ol><h3 id="enable-flow" tabindex="-1">Enable Flow <a class="header-anchor" href="#enable-flow" aria-hidden="true">#</a></h3><ol><li>User clicks toggle \u2192 <code>enabled = true</code></li><li>Update <code>CronJobStateService</code> state</li><li>Next scheduled run \u2192 JobSchedulerService checks state</li><li>State is enabled \u2192 Job executes normally</li><li>\u2705 <strong>Works perfectly!</strong></li></ol><hr><h2 id="\u{1F4CA}-comparison" tabindex="-1">\u{1F4CA} Comparison <a class="header-anchor" href="#\u{1F4CA}-comparison" aria-hidden="true">#</a></h2><table><thead><tr><th>Approach</th><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td><strong>Registry-based</strong> (Old)</td><td>Direct control</td><td>\u274C Names don&#39;t match<br>\u274C Generates warnings<br>\u274C More complex</td></tr><tr><td><strong>State-based</strong> (Current)</td><td>\u2705 Simple<br>\u2705 No warnings<br>\u2705 Works reliably</td><td>None</td></tr></tbody></table><hr><h2 id="\u2705-current-status" tabindex="-1">\u2705 Current Status <a class="header-anchor" href="#\u2705-current-status" aria-hidden="true">#</a></h2><p><strong>Build</strong>: \u2705 Passing<br><strong>Warnings</strong>: \u2705 None<br><strong>Functionality</strong>: \u2705 Working<br><strong>Code</strong>: \u2705 Clean</p><p>The state-based approach is actually <strong>better</strong> because:</p><ul><li>Simpler code</li><li>No registry dependencies</li><li>More reliable</li><li>No warnings</li><li>Same functionality</li></ul><hr><h2 id="\u{1F389}-summary" tabindex="-1">\u{1F389} Summary <a class="header-anchor" href="#\u{1F389}-summary" aria-hidden="true">#</a></h2><p>The warning was just a noisy side-effect. The system worked correctly from the start. Now it&#39;s even cleaner!</p><p><strong>All issues resolved. System is production-ready!</strong> \u2705</p>`,32),o=[r];function l(i,c,d,h,p,g){return s(),a("div",null,o)}const y=e(t,[["render",l]]);export{b as __pageData,y as default};
