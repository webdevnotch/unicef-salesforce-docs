import{_ as s,c as a,o as n,a as o}from"./app.2edf4356.js";const C=JSON.parse(`{"title":"Custom Headers Guide","description":"","frontmatter":{},"headers":[{"level":2,"title":"X-Request-Type Header","slug":"x-request-type-header","link":"#x-request-type-header","children":[{"level":3,"title":"Usage","slug":"usage","link":"#usage","children":[]},{"level":3,"title":"Supported Endpoints","slug":"supported-endpoints","link":"#supported-endpoints","children":[]},{"level":3,"title":"Header Values","slug":"header-values","link":"#header-values","children":[]},{"level":3,"title":"Best Practices","slug":"best-practices","link":"#best-practices","children":[]},{"level":3,"title":"How It's Used","slug":"how-it-s-used","link":"#how-it-s-used","children":[]},{"level":3,"title":"Audit Log Example","slug":"audit-log-example","link":"#audit-log-example","children":[]},{"level":3,"title":"Client Implementation Examples","slug":"client-implementation-examples","link":"#client-implementation-examples","children":[]},{"level":3,"title":"Migration","slug":"migration","link":"#migration","children":[]},{"level":3,"title":"Questions?","slug":"questions","link":"#questions","children":[]}]}],"relativePath":"backend/CUSTOM_HEADERS.md"}`),l={name:"backend/CUSTOM_HEADERS.md"},e=o(`<h1 id="custom-headers-guide" tabindex="-1">Custom Headers Guide <a class="header-anchor" href="#custom-headers-guide" aria-hidden="true">#</a></h1><h2 id="x-request-type-header" tabindex="-1">X-Request-Type Header <a class="header-anchor" href="#x-request-type-header" aria-hidden="true">#</a></h2><p>The <code>x-request-type</code> header allows clients to specify the business context or purpose of their API call. This information is logged in audit logs to help track usage patterns and debug issues.</p><h3 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-hidden="true">#</a></h3><p>Add the <code>x-request-type</code> header to your API requests:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Example: Getting token for a pledge operation</span></span>
<span class="line"><span style="color:#A6ACCD;">curl -X POST https://api.example.com/v1/salesforce/token \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-api-key: your-api-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-request-type: pledge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Example: Getting token for a payment link operation</span></span>
<span class="line"><span style="color:#A6ACCD;">curl -X POST https://api.example.com/v1/salesforce/token \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-api-key: your-api-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-request-type: payment-link</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Example: Getting token for a one-time charge</span></span>
<span class="line"><span style="color:#A6ACCD;">curl -X POST https://api.example.com/v1/salesforce/token \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-api-key: your-api-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-request-type: oneoff-charge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="supported-endpoints" tabindex="-1">Supported Endpoints <a class="header-anchor" href="#supported-endpoints" aria-hidden="true">#</a></h3><ul><li><strong>GET /v1/salesforce/token</strong> - Get Salesforce token</li><li><strong>POST /v1/salesforce/token</strong> - Refresh Salesforce token</li></ul><h3 id="header-values" tabindex="-1">Header Values <a class="header-anchor" href="#header-values" aria-hidden="true">#</a></h3><p>Use descriptive values that indicate the business context:</p><p><strong>Common Values:</strong></p><ul><li><code>pledge</code> - For pledge operations</li><li><code>pledge-charge</code> - For pledge charge operations</li><li><code>oneoff</code> - For one-time donations/payments</li><li><code>payment-link</code> - For payment link generation</li><li><code>subscription</code> - For recurring subscriptions</li><li><code>refund</code> - For refund operations</li><li><code>checkout</code> - For checkout operations</li></ul><p><strong>Custom Values:</strong> You can use any custom string that makes sense for your application, e.g.:</p><ul><li><code>mobile-app-donation</code></li><li><code>web-checkout-pledge</code></li><li><code>admin-panel-test</code></li></ul><h3 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-hidden="true">#</a></h3><ol><li><strong>Be Consistent</strong> - Use consistent naming across your application</li><li><strong>Be Descriptive</strong> - Use clear, meaningful names</li><li><strong>Include Context</strong> - If applicable, include the source (e.g., <code>mobile-app-pledge</code>)</li><li><strong>Optional</strong> - The header is optional; if not provided, defaults to <code>&quot;token&quot;</code></li></ol><h3 id="how-it-s-used" tabindex="-1">How It&#39;s Used <a class="header-anchor" href="#how-it-s-used" aria-hidden="true">#</a></h3><p>The <code>x-request-type</code> value is stored in audit logs in the <code>type</code> field, allowing you to:</p><ol><li><strong>Track Usage Patterns</strong> - See which operations are most common</li><li><strong>Debug Issues</strong> - Filter audit logs by operation type</li><li><strong>Performance Analysis</strong> - Compare performance across different operation types</li><li><strong>Security Monitoring</strong> - Identify unusual patterns by operation type</li></ol><h3 id="audit-log-example" tabindex="-1">Audit Log Example <a class="header-anchor" href="#audit-log-example" aria-hidden="true">#</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">userId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user_123</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">apiKeyId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">key_456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">endpoint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/v1/salesforce/token</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">method</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">getToken</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pledge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">// \u2190 Your x-request-type value</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">requestData</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> ... </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">responseData</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> ... </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">statusCode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">ipAddress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">192.168.1.100</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">userAgent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Mozilla/5.0...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">duration</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">createdAt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2024-01-15T10:30:00Z</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="client-implementation-examples" tabindex="-1">Client Implementation Examples <a class="header-anchor" href="#client-implementation-examples" aria-hidden="true">#</a></h3><h4 id="javascript-typescript" tabindex="-1">JavaScript/TypeScript <a class="header-anchor" href="#javascript-typescript" aria-hidden="true">#</a></h4><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// Fetch API</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fetch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://api.example.com/v1/salesforce/token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">method</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">x-api-key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">your-api-key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">x-request-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pledge</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u2190 Add this header</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Axios</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://api.example.com/v1/salesforce/token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">x-api-key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">your-api-key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">x-request-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pledge</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u2190 Add this header</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="curl" tabindex="-1">cURL <a class="header-anchor" href="#curl" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">curl -X POST https://api.example.com/v1/salesforce/token \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-api-key: your-api-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x-request-type: pledge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -H </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h4 id="python-requests" tabindex="-1">Python (requests) <a class="header-anchor" href="#python-requests" aria-hidden="true">#</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> requests</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://api.example.com/v1/salesforce/token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">={</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x-api-key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">your-api-key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x-request-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pledge</span><span style="color:#89DDFF;">&#39;</span><span style="color:#82AAFF;">  </span><span style="color:#676E95;"># \u2190 Add this header</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="migration" tabindex="-1">Migration <a class="header-anchor" href="#migration" aria-hidden="true">#</a></h3><p>If you&#39;re adding this to an existing application:</p><ol><li><strong>Start Using It</strong> - Begin adding the header to new code</li><li><strong>Gradually Roll Out</strong> - Add it to existing code gradually</li><li><strong>Monitor Logs</strong> - Check that the type values are appearing in audit logs</li><li><strong>No Breaking Changes</strong> - Missing the header still works (defaults to &quot;token&quot;)</li></ol><h3 id="questions" tabindex="-1">Questions? <a class="header-anchor" href="#questions" aria-hidden="true">#</a></h3><p>Contact your API administrator for more information about custom headers.</p>`,33),p=[e];function t(r,c,D,i,y,F){return n(),a("div",null,p)}const u=s(l,[["render",t]]);export{C as __pageData,u as default};
